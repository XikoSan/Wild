{% extends 'player/redesign/header.html' %}
{% load l10n %}{% load i18n %}
{% load static %}
{% load tz %}
{% load redesign.template_svg.nopic %}
{% block content %}
<section class="profile">

		<!-- НИКНЕЙМ -->
		<h1 class="ct__nickname">
<!--			<span style="display: none;">-->
			<span id="player_nickname_view">
				{{ char.nickname }}
			</span>

			<!-- кнопка написать игроку -->
			<button class="ct__nickname-message ct__square-mid-btn" onclick="window.location.href = '/im/{% localize off %}{{ char.pk }}{% endlocalize %}/'">
				<svg width="43" height="27" viewBox="0 0 43 27" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M16.2073 14.4351L0 25.6548V1.00525L16.2073 14.4351Z" fill="var(--c10two)"/>
					<path d="M25.8514 14.4398L42.0587 25.6594V1.00989L25.8514 14.4398Z" fill="var(--c10two)"/>
					<path d="M1.93774 0L9.08032 6.04102V6.04297L21.3049 16.3809L33.5295 6.04102L40.6702 0H32.4104H10.1975H1.93774Z" fill="var(--c10two)"/>
					<path d="M17.2631 15.9076L2.27258 26.7068H9.91768H32.2556H39.9007L24.9082 15.9076L21.0857 18.6621L17.2631 15.9076Z" fill="var(--c10two)"/>
				</svg>
			</button>
		</h1>
		<!-- конец НИКНЕЙМА -->

		<div class="profile__top-wrapper" style="height: 200rem;">

			<div class="profile__top-left">

				<button class="profile__id" id="profile__id">
					<span>
						ID: {{ char.pk }} <!-- значение ID игрока -->
					</span>
					<svg class="profile__id-corner" width="97" height="24" viewBox="0 0 97 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<rect width="73" height="24" fill="var(--c30)"/><path d="M97 0L73 24V0H97Z" fill="var(--c30)"/>
					</svg>
					<svg class="profile__id-copyed" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="var(--c10two)">
						<path d="M22 2v22h-20v-22h3c1.23 0 2.181-1.084 3-2h8c.82.916 1.771 2 3 2h3zm-11 1c0 .552.448 1 1 1 .553 0 1-.448 1-1s-.447-1-1-1c-.552 0-1 .448-1 1zm9 1h-4l-2 2h-3.897l-2.103-2h-4v18h16v-18zm-13 9.729l.855-.791c1 .484 1.635.852 2.76 1.654 2.113-2.399 3.511-3.616 6.106-5.231l.279.64c-2.141 1.869-3.709 3.949-5.967 7.999-1.393-1.64-2.322-2.686-4.033-4.271z"/>
					</svg>
				</button>
				{% if char.image %}
				<img src="{{ char.image.url }}" class="profile__ava" {% if char.party %}{% if char.party.members_image %}{% if party_back %}style="background-image: url({{ char.party.members_image.url }}); background-size: cover;"{% endif %}{% endif %}{% endif %}>
				{% else %}{% nopic player 'profile__ava' %}{% endif %}

				{% if ava_border %}
				<svg class="profile__ava-border" viewBox="0 0 {% localize off %}{{ ava_border.box_x }} {{ ava_border.box_y }}{% endlocalize %}">
					{% autoescape off %}
					{{ ava_border.shape }}
					{% endautoescape %}
				</svg>
				{% endif %}
			</div>

			<div class="profile__top-right">
				<button class="profile__info ct__square-btn active"> <!-- кнопка перекл. на инфо -->
					<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M100 10.0711L100 95C100 97.7614 97.7614 100 95 100L5 100C2.23858 100 2.66948e-08 97.7614 5.96244e-08 95L1.13286e-06 5C1.16579e-06 2.23858 2.23858 2.66947e-08 5 5.96244e-08L89.9289 1.07239e-06C91.255 1.08821e-06 92.5268 0.52678 93.4645 1.46446L98.5355 6.53554C99.4732 7.47321 100 8.74499 100 10.0711Z" fill="url(#paint0_linear_48_141)"/>
						<path class="profile__info-i1" d="M46.9877 45.4508L43.2377 46.8033L43.1147 47.8484C48.2787 45.9303 48.4631 49.1394 47.9098 50.9836L45.3279 60.082C43.6065 66.2295 51.8238 65.1844 56.1475 63.8935L56.3934 62.7869C51.5246 64.164 51.0041 61.5574 51.3525 60.082L53.8115 50.9836C55.6803 44.4918 50.041 44.5902 46.9877 45.4508Z" fill="var(--c10one)" stroke="var(--c10one)" stroke-width="2" stroke-linejoin="round"/>
						<circle class="profile__info-i2" cx="50" cy="50" r="30" stroke="var(--c10one)" stroke-width="5"/>
						<circle class="profile__info-i1" cx="53.1353" cy="37.7664" r="1.88115" fill="var(--c10one)" stroke="var(--c10one)" stroke-width="3"/>
						<defs>
						<linearGradient id="paint0_linear_48_141" x1="1.19249e-06" y1="0" x2="100" y2="99.9998" gradientUnits="userSpaceOnUse">
						<stop class="profile__info-i3" stop-color="var(--c30)"/>
						<stop class="profile__info-i4" offset="1" stop-color="var(--c30)" stop-opacity="0"/>
						</linearGradient>
						</defs>
					</svg>
				</button>
			</div>
		</div>

		<div class="profile__tabs-wrapper" style="height: calc(100vh - 350rem);">
			<!-- ВКЛАДКА ИНФОРМАЦИЯ -->
			<div class="profile__info-tab">

				<div class="ct__s">
					<h2 class="ct__s-title">{% trans 'был в сети' context "profile" %}</h2>
					<p class="ct__s-text">
						{% if dtime %}{{ dtime }}{% else %}{% trans 'давно' %}{% endif %}
					</p>
				</div>

				<div class="ct__s">
					<h2 class="ct__s-title">{% trans 'место в рейтинге' context "profile" %}</h2>
					<p class="ct__s-text">
						{{ cash_rating }}
						<a href="/cash_top/">
							{% trans '(к рейтингу)' context "profile" %}
						</a>
					</p>
				</div>

				<div class="ct__s">
					<h2 class="ct__s-title">{% trans 'характеристики' context "profile" %}</h2>
					<p class="ct__s-text">
						<font color="FF0000">{{ char.power }}</font>
						/
						<font color="337AB7">{{ char.knowledge }}</font>
						/
						<font color="#18D04C">{{ char.endurance }}</font>
						<a href="/skill_top/">
							{% trans '(к рейтингу)' context "profile" %}
						</a>
					</p>
				</div>


				<div class="ct__s">
					<h2 class="ct__s-title">{% trans 'место жительства' context "profile" %}</h2>
					<p class="ct__s-text">
						<a href="/region/{{ char.region.pk }}/">
							{% trans char.region.region_name context "regions_list" %}
						</a>
					</p>
				</div>

				<div class="ct__s">
					<h2 class="ct__s-title">{% trans 'прописка' context "profile" %}</h2>
					<p class="ct__s-text">
						<a href="/region/{{ char.residency.pk }}/">
							{% trans char.residency.region_name context "regions_list" %}, {% trans 'с' context "profile" %}: {{ char.residency_date|timezone:player.time_zone|date:"d.m.Y H:i" }}
						</a>
					</p>
				</div>

				<div class="ct__s">
					<h2 class="ct__s-title">{% trans 'партия' %}</h2>
					<p class="ct__s-text">
						{% if char.party %}
						<a href='/party/{% localize off %}{{ char.party.pk }}{% endlocalize %}'>
							{{ char.party.title }}
						</a>
						{% else %}{% trans 'беспартийный' %}{% endif %}
						(
						<a href="/party_history/{% localize off %}{{ char.pk }}{% endlocalize %}/">
							{% trans 'история' context "profile" %}
						</a>
						)
					</p>
				</div>

				<div class="ct__s">
					<h2 class="ct__s-title">{% trans 'должность в партии' %}</h2>
					<p class="ct__s-text">
						{% if char.party_post %}
							{% if char.party_post.based %}
								{% trans char.party_post.title context "party_manage" %}
							{% else %}
								{{ char.party_post.title }}
							{% endif %}
						{% else %}{% trans 'беспартийный' %}{% endif %}
					</p>
				</div>

				<div class="ct__s">
					<h2 class="ct__s-title">
						<span>{% trans 'о себе' %}:</span>
					</h2>
					<p id="player_bio_view" class="ct__s-text" >{% if not char.bio %}{{ user_link }}{% else %}{{ char.bio }}{% endif %}</p>
				</div>
			</div>
			<!-- конец ВКЛАДКИ ИНФОРМАЦИЯ -->
		</div>


	</section>
	<script src="{% static 'redesign/js/copy_to_clip.js' %}?{{ csrf_token }}"></script>
	<script>
		if (document.getElementById('profile__id')) {
			const buttonIdCopy = new IdCopy('{{ request.get_host }}/profile/{% localize off %}{{ char.pk }}{% endlocalize %}/');
		}
	</script>

{% endblock %}
