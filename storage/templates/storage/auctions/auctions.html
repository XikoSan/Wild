{% extends 'player/header.html' %}
{% load static %}
{% load dict_key %}
{% load get_attr %}
{% load get_len %}
{% load l10n %}{% load i18n %}
{% block for_scripts_and_css %}
<script src='{% static "js/tablesort.js" %}?{{ csrf_token }}'></script>
<script src='{% static "js/tablesort.number.js" %}?{{ csrf_token }}'></script>
<script src='{% static "js/auctions.js" %}?{{ csrf_token }}'></script>
<link rel="stylesheet" href='{% static "css/tablesort.css" %}?{{ csrf_token }}'>
<link rel="stylesheet" href='{% static "css/style.css" %}?{{ csrf_token }}'>
{% endblock %}

{% block content %}
<script>

    var groups_n_goods = {};

    {% for group in storage_cl|get_attr:'types' %}
        groups_n_goods['{{ group }}'] = {};
        {% for good in storage_cl|get_attr:group %}
            groups_n_goods['{{ group }}']['{{ good }}'] = '{{ storage_cl|get_attr:group|dict_key:good }}';
        {% endfor %}
    {% endfor %}
</script>
<div class="col-xs-12 col-sm-12 col-md-10">
    <div id="goods_list" align="center">
        <font id="offers_help" style="color: black">Выберите один или несколько критериев справа и нажмите "Поиск"</font>
        <font id="offers_none" style="color: black; display: none">Ничего не найдено</font>

        <table id="lines" class="sort" style="display: none">
<!--        <table id="lines" class="sort">-->
          <thead>
            <tr>
              <th data-sort-default role="columnheader">Товар</th>
              <th role="columnheader">Дата создания</th>
              <th role="columnheader">Владелец</th>
              <th role="columnheader">Количество</th>
              <th role="columnheader">Цена (шт.)</th>
              <th role="columnheader">Лотов</th>
              <th role="columnheader">Ставка (мин)</th>
              <th role="columnheader">Ставка (макс)</th>
              <th role="columnheader">Действие</th>
            </tr>
          </thead>
          <tbody>
          <!--торговые предложения-->
              <tr>
                  <td data-name="coal" class="good">Уголь</td>
                  <td>13:57</td>
                  <td class="owner">
                      Ordensstaat
                  </td>
                  <td class="volume">500 000</td>
                  <td class="price">10</td>
                  <td class="lots">10</td>
                  <td class="price_min">5</td>
                  <td class="price_max">8</td>
                  <td class="type"><button id="72">Перейти</button></td>
              </tr>
          </tbody>
        </table>
    </div>
</div>
<div class="col-xs-2 col-sm-2 col-md-2" align="center">
    <form id="offers_search_form" role="form">
        <div class="row" style="margin-top: 5%">
            <select name="trade_groups" id="trade_groups" multiple size="{{ storage_cl|get_attr:'types'|get_len }}" style="width: 100%">
                {% for group in storage_cl|get_attr:'types' %}
                <option value='{{ group }}'>{{ storage_cl|get_attr:'types'|dict_key:group }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="row" style="margin-top: 5%">
            <select name="cc" id="trade_goods" style="width: 100%">
                <option id="good_default" value='default' disabled selected value>Выберите товар</option>
                {% for group in storage_cl|get_attr:'types' %}
                    {% for good in storage_cl|get_attr:group %}
                <option id="good_{{ good }}" value='{{ good }}' style="display: none">{{ storage_cl|get_attr:group|dict_key:good }}</option>
                    {% endfor %}
                {% endfor %}
            </select>
        </div>
        <div class="row" style="margin-top: 5%;">
            <button id="accept" type="submit" enctype="multipart/form-data" class="save btn btn-info" style="width: 100%">Поиск</button>
        </div>
    </form>
</div>
{% endblock %}