{% load dict_key %}
{% load get_attr %}
{% load get_diff %}
{% load get_sum %}
{% load get_mul %}
{% load get_key_list %}
{% load tz %}
{% load l10n %}{% load i18n %}
<tr>
    {% with bill=data|dict_key:'bill' %}
    <td>
        {% with title=data|dict_key:'title' %}
        <p>{{ title }}</p>
        {% endwith %}
        {% with player=data|dict_key:'player' %}
        <p style="font-weight: 700;">{{ bill.voting_start|timezone:player.time_zone|date:"d.m.Y H:i" }}</p>
         {% endwith %}
    </td>

    <td>
        <div class="gover__tableVote-wrappper">
            <div class="gover__withImage" style="margin-bottom: 4rem;">
                <img src="static/img/regions/webp/55/{{ bill.region.on_map_id }}.webp">
                <span>{{ bill.region }}</span>
            </div>
            <div class="gover__withImage" style="margin-bottom: 4rem;">
                <img src="static/img/regions/webp/55/{{ bill.region_to.on_map_id }}.webp">
                <span>{{ bill.region_to }}</span>
            </div>
        </div>
    </td>

    <!--Ğ²Ğ¸Ğ´Ğ½Ğ¾ Ğ½Ğ° Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğº-->
    <td class="gover__tableDopInfo">
        <div class="gover__tableVote-wrappper">
            <div class="gover__withImage" style="margin-bottom: 4rem;">
                <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="17" cy="17" r="16.5" stroke="var(--c10two)"/>
                  <path d="M10.4259 16.781L10.9111 17.2662L13.2237 17.8484L4.2965 18.3336L2.74394 18.9158L2.21024 19.8053L2 20.7109L2.29111 20.6301M10.4259 16.781L12.4798 14.2096L14.1456 14.0267M10.4259 16.781L14.6631 17.056M16.6038 13.7568L16.6685 13.2878H17.6226M16.6038 13.7568L16.5391 14.5816M16.6038 13.7568L14.1456 14.0267M17.6226 13.2878L17.5256 13.126L17.4061 12.7056M17.6226 13.2878L17.9849 14.5816M19.0189 13.2716L18.9973 13.1907C19.0674 13.1207 19.2011 12.9255 19.1752 12.7056L18.8032 11.1207C18.7601 11.0128 18.6156 10.7843 18.3827 10.7325L16.9596 5.20151C16.9272 5.0937 16.8399 4.88453 16.7493 4.91041L16.5229 4.27968C16.4636 4.15569 16.248 3.93035 15.8598 4.02092C15.7143 4.04787 15.4329 4.18912 15.4717 4.53844L15.6011 5.153C15.5849 5.2123 15.5526 5.35354 15.5526 5.4441L17.0889 11.1207C17.0296 11.2123 16.9531 11.457 17.1213 11.7029L17.4061 12.7056M19.0189 13.2716L19.9353 13.2878M19.0189 13.2716L19.3691 14.5816M19.9353 13.2878L19.8059 14.5816M19.9353 13.2878L20.0485 13.4519M20.0323 15.4387L20.2588 13.7568L20.1617 13.6161M20.0323 15.4387L19.8059 14.5816M20.0323 15.4387H16.6685M20.0323 15.4387L20.1617 15.9401M19.8059 14.5816H19.3691M19.3691 14.5816L19.434 14.8242C18.9423 15.4193 18.3234 15.126 18.0755 14.905L17.9849 14.5816M17.9849 14.5816H16.5391M16.5391 14.5816L16.6685 15.4387M16.6685 15.4387L16.442 16.1341M20.1617 13.6161L20.0485 13.4519M20.1617 13.6161L22.9596 13.9053M27.3261 17.056L26.9218 17.5573M27.3261 17.056L26.2749 18.3498M27.3261 17.056H22.0377M27.3261 17.056L27.0619 16.6517M26.9218 17.5573H26.6469L26.2749 18.3498M26.9218 17.5573L29.1536 17.7029M26.2749 18.3498H24.9973M26.2749 18.3498L29.1536 18.2847M20.1617 15.9401L20.6792 17.056H22.0377M20.1617 15.9401L22.0377 17.056M16.442 16.1341L16.5391 17.056H14.6631M16.442 16.1341L14.6631 17.056M31.2561 19.1422L32 18.9643V18.2204L31.5862 18.2297M31.2561 19.1422L31.0782 20.5007L30.8194 20.6301V20.9859L22.345 22.9589M31.2561 19.1422C31.3639 19.1207 31.5957 19.1519 31.6604 19.4495L31.7089 20.2905L30.9973 23.25C30.9811 23.3309 30.8906 23.5153 30.6577 23.6058L23.9137 26.4845M22.345 22.9589H21.9407L21.2455 20.4198M22.345 22.9589L21.5202 20.2905M21.1968 20.2419L21.5202 20.2905M21.1968 20.2419L21.2455 20.4198M21.1968 20.2419L21.2534 19.9508M24.9973 18.3498H24.5768L22.7817 19.0696M24.9973 18.3498L21.779 19.6597L21.5202 20.2905M23.9137 26.4845L21.4394 24.0748L20.9218 23.0398V21.4549L21.2455 20.4198M23.9137 26.4845H23.5741M20.6146 21.4549L20.5499 22.7325L20.6146 23.0883L21.1968 24.1557L23.5741 26.4845M23.5741 26.4845L20.6146 26.3066L18.6092 24.2431M17.8005 21.2123V22.3767L18.027 23.4764L18.3827 24.0101L18.6092 24.2431M17.8005 21.2123L20.097 21.277L20.7439 21.5034L20.9542 20.2096L21.2534 19.9508M17.8005 21.2123L16.7008 21.1677M21.2534 19.9508L21.31 19.6597L22.7817 19.0696M22.7817 19.0696V18.7541L22.6361 18.6085L17.8005 18.463L17.283 18.8188L17.0855 19.3363M27.0619 16.6517L25.434 14.1611L25.2561 14.1427M27.0619 16.6517L30.4798 16.7872M31.5862 18.2297L31.5472 16.8295L30.4798 16.7872M31.5862 18.2297L29.1536 18.2847M29.1536 18.2847V17.7029M29.1536 17.7029L30.4798 16.7872M16.5391 20.7684L16.345 21.277L16.6038 21.1638L16.7008 21.1677M16.5391 20.7684L16.1833 19.9508M16.5391 20.7684L17.0855 19.3363M16.1833 19.9508L16.0701 19.3363L16.5391 18.8188L16.7008 18.8835L17.0855 19.3363M16.1833 19.9508L5.36388 19.5465L5.28302 19.7244H4.99191L5.18534 20.0964M16.7008 21.1677L17.4192 23.1368M17.4192 23.1368L17.5903 23.6058L6.67385 22.9589L6.41315 22.4576M17.4192 23.1368L6.41315 22.4576M6.41315 22.4576L5.18534 20.0964M2.29111 20.6301H4.68464L4.91105 20.7433L5.18534 20.0964M2.29111 20.6301L2.74394 21.5034L3.03504 22.3767L3.73046 23.1368L7.98383 25.4333L11.2668 25.5627L18.6092 24.2431M14.1456 14.0267V12.8188L17.4061 12.7056M20.0485 13.4519L22.9596 13.5304V13.9053M22.9596 13.9053L23.3477 13.5304H23.8814V13.1907L24.4798 13.1626M22.9596 13.9053L25.2561 14.1427M25.2561 14.1427V13.126L24.4798 13.1626M24.4798 14.0267V13.1626" stroke="var(--c10one)" stroke-width="0.5" stroke-linejoin="bevel"/>
                </svg>
                <span>{% trans 'ĞĞ°Ğ·ĞµĞ¼Ğ½Ğ°Ñ Ğ²Ğ¾Ğ¹Ğ½Ğ°' context "start_war" %}</span>
            </div>
        </div>
    </td>

    <!--Ğ²Ğ¸Ğ´Ğ½Ğ¾ Ğ½Ğ° Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğº-->
    <td class="gover__tableCancel">
        <a href='/profile/{% localize off %}{{ bill.initiator.pk }}{% endlocalize %}' target="_blank">{{ bill.initiator }}</a>
        {% with player=data|dict_key:'player' %}
        {% if bill.initiator == player %}
        <button onclick="cancel_bill('StartWar',{% localize off %}{{ bill.pk }}{% endlocalize %})">âŒ</button>
        {% endif %}
        {% endwith %}
    </td>

    <!--Ğ²Ğ¸Ğ´Ğ½Ğ¾ Ğ½Ğ° Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğº-->
    <td class="gover__tableVote">
        {% with is_deputy=data|dict_key:'is_deputy' %}
            {% if is_deputy %}
                {% with player=data|dict_key:'player' %}
                {% with has_right=data|dict_key:'has_right' %}

                    {% if player not in bill.votes_pro.all and player not in bill.votes_con.all %}
        <button onclick="vote_bill('StartWar',{% localize off %}{{ bill.pk }}{% endlocalize %},'pro')">ğŸ‘</button>
        <button onclick="vote_bill('StartWar',{% localize off %}{{ bill.pk }}{% endlocalize %},'con')">ğŸ‘</button>
                    {% else %}
                        {% if player in bill.votes_pro.all %}
                        <button disabled>ğŸ‘</button>
                        {% endif %}
                        {% if player in bill.votes_con.all %}
                        <button disabled>ğŸ‘</button>
                        {% endif %}
                    {% endif %}

                {% endwith %}
                {% endwith %}
            {% endif %}
        {% endwith %}

    </td>

    <td class="gover__tableInfoTd">
        <button class="gover__tableInfo" onclick="goverInfoModal.getInnerContent(this)">&#8505</button>
    </td>
    {% endwith %}
</tr>